<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="page-title">My Vanilla JS Blog - Markdown Enabled + Toolbar</title>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
body { font-family: 'Segoe UI', Tahoma, sans-serif; max-width: 800px; margin:0 auto; padding:20px; background:#f4f4f9; }
nav { display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #ddd; padding-bottom:20px; margin-bottom:20px; }
#blog-name { cursor:pointer; font-size:1.5em; font-weight:bold; padding:5px 10px; border-radius:5px; }
.btn { padding:10px 20px; border:none; border-radius:5px; cursor:pointer; font-weight:bold; margin:3px; }
.btn-primary{background:#007BFF;color:#fff;} .btn-secondary{background:#6c757d;color:#fff;} .btn-danger{background:#dc3545;color:#fff;} .btn-warning{background:#ffc107;} .btn-success{background:#28a745;color:#fff;}
.card { background:#fff; padding:20px; border-radius:8px; margin-bottom:15px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
#editor-area { background:#fff; border:1px solid #ccc; border-radius:5px; padding:15px; min-height:300px; }
.toolbar button { background:#eee; padding:8px; border-radius:4px; border:1px solid #ccc; cursor:pointer; }
.hidden{display:none!important;}
</style>
</head>
<body>
<nav>
<h1 id="blog-name" contenteditable="true" onblur="app.setBlogName()">‚úçÔ∏è My Blog System</h1>
<button id="nav-create-btn" class="btn btn-primary" onclick="app.navigate('editor')">+ New Post</button>
</nav>
<section id="home-view">
<button class="btn btn-success" onclick="app.importData()">üì• Import Data</button>
<button class="btn btn-secondary" onclick="app.exportData()">üì§ Export Data</button>
<div id="blog-list"></div>
</section>
<section id="editor-view" class="hidden">
<h2 id="editor-heading">Write New Post</h2>
<input type="hidden" id="post-id">
<input type="text" id="post-title" placeholder="Enter a catchy title...">
<div class="toolbar">
<button onclick="app.format('bold')"><b>B</b></button>
<button onclick="app.format('italic')"><i>I</i></button>
<button onclick="app.format('underline')"><u>U</u></button>
<button onclick="app.format('insertUnorderedList')">‚Ä¢ List</button>
<button onclick="app.format('insertOrderedList')">1. List</button>
<button onclick="app.format('justifyLeft')">‚≠∞</button>
<button onclick="app.format('justifyCenter')">‚≠Ø</button>
<button onclick="app.format('justifyRight')">‚≠≤</button>
<button onclick="app.format('foreColor','red')">Aüî¥</button>
<button onclick="app.format('hiliteColor','yellow')">üü®</button>
</div>
<div id="editor-area" contenteditable="true"></div>
<button class="btn btn-primary" onclick="app.savePost()">Save Post</button>
<button class="btn btn-secondary" onclick="app.cancelEdit()">Cancel</button>
</section>
<section id="reader-view" class="hidden">
<button class="btn btn-secondary" onclick="app.navigate('home')">‚Üê Back</button>
<button class="btn btn-warning" onclick="app.editCurrentPost()">Edit</button>
<button class="btn btn-danger" onclick="app.deleteCurrentPost()">Delete</button>
<h1 id="reader-title"></h1>
<small id="reader-date"></small>
<div id="reader-content"></div>
</section>
<script>
const app={state:{posts:[],activePostId:null,blogName:'My Vanilla JS Blog'},init(){app.loadData();app.renderBlogName();app.renderList();},loadData(){const local=localStorage.getItem('myBlogAppState');if(local){const s=JSON.parse(local);app.state.posts=s.posts||[];app.state.blogName=s.blogName||'My Vanilla JS Blog';}},saveData(){localStorage.setItem('myBlogAppState',JSON.stringify(app.state));},exportData(){const blob=new Blob([JSON.stringify(app.state,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='blog_backup.json';a.click();URL.revokeObjectURL(url);},importData(){let input=document.createElement('input');input.type='file';input.accept='application/json';input.onchange=e=>{let f=e.target.files[0];let r=new FileReader();r.onload=x=>{let d=JSON.parse(x.target.result);app.state=d;app.saveData();app.renderBlogName();app.renderList();};r.readAsText(f);};input.click();},renderBlogName(){document.getElementById('blog-name').innerText=app.state.blogName;},setBlogName(){let n=document.getElementById('blog-name').innerText.trim();if(n){app.state.blogName=n;app.saveData();}},navigate(v){['home','editor','reader'].forEach(id=>document.getElementById(id+'-view').classList.add('hidden'));document.getElementById(v+'-view').classList.remove('hidden');},format(cmd,val=null){document.execCommand(cmd,false,val);},savePost(){let id=document.getElementById('post-id').value;let t=document.getElementById('post-title').value;let c=document.getElementById('editor-area').innerHTML;if(!t.trim()||!c.trim()){alert('Need title & content');return;}let time=new Date().toLocaleString();if(id){let p=app.state.posts.find(x=>x.id==id);p.title=t;p.content=c;}else{app.state.posts.unshift({id:Date.now(),title:t,content:c,date:time});}app.saveData();app.clearEditor();app.navigate('home');app.renderList();},clearEditor(){document.getElementById('post-id').value='';document.getElementById('post-title').value='';document.getElementById('editor-area').innerHTML='';},renderList(){let box=document.getElementById('blog-list');box.innerHTML='';app.state.posts.forEach(p=>{let div=document.createElement('div');div.className='card';div.innerHTML=`<h3 onclick="app.viewPost(${p.id})">${p.title}</h3><small>${p.date}</small><p>${p.content.substring(0,150)}...</p>`;box.appendChild(div);});},viewPost(id){let p=app.state.posts.find(x=>x.id===id);app.state.activePostId=id;document.getElementById('reader-title').innerText=p.title;document.getElementById('reader-date').innerText=p.date;document.getElementById('reader-content').innerHTML=p.content;app.navigate('reader');},editCurrentPost(){let p=app.state.posts.find(x=>x.id===app.state.activePostId);document.getElementById('post-id').value=p.id;document.getElementById('post-title').value=p.title;document.getElementById('editor-area').innerHTML=p.content;app.navigate('editor');},deleteCurrentPost(){app.state.posts=app.state.posts.filter(x=>x.id!==app.state.activePostId);app.saveData();app.navigate('home');app.renderList();}};
app.init();
</script>
</body>
</html>
